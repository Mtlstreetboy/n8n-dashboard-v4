sequenceDiagram
    participant User as üë§ Utilisateur
    participant N8N as üéØ n8n (Orchestrateur)
    participant Python as üêç Script Python Local
    participant Ollama as ü§ñ Ollama (IA)
    participant Storage as üìÅ Stockage Local

    Note over User,Storage: Exemple de Workflow Agentique n8n

    User->>N8N: 1. POST /webhook<br/>{raw_data: "..."}
    activate N8N

    Note over N8N: N≈ìud: Webhook Trigger

    N8N->>Python: 2. Execute Command<br/>python3 /data/scripts/clean_data.py<br/>(avec input JSON via stdin)
    activate Python
    Note over Python: Traitement Data Engineering:<br/>- Normalisation<br/>- Validation<br/>- Ajout timestamp
    Python-->>N8N: 3. Retourne donn√©es nettoy√©es<br/>(JSON via stdout)
    deactivate Python

    Note over N8N: N≈ìud: Ollama Chat Model

    N8N->>Ollama: 4. POST http://ollama:11434/api/generate<br/>{model: "llama3", prompt: "Analyse..."}
    activate Ollama
    Note over Ollama: Inf√©rence du mod√®le LLM:<br/>- Analyse s√©mantique<br/>- G√©n√©ration de texte<br/>- Classification
    Ollama-->>N8N: 5. R√©ponse IA<br/>{response: "..."}
    deactivate Ollama

    Note over N8N: N≈ìud: Write Binary File

    N8N->>Storage: 6. √âcrit r√©sultat<br/>/data/files/output_TIMESTAMP.json
    activate Storage
    Storage-->>N8N: 7. Confirmation √©criture
    deactivate Storage

    Note over N8N: N≈ìud: Webhook Response

    N8N-->>User: 8. HTTP 200 OK<br/>{status: "success", result: "..."}
    deactivate N8N

    Note over User: R√©sultat re√ßu en quelques secondes<br/>gr√¢ce au traitement local